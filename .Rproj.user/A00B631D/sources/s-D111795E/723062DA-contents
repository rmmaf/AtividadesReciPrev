library('rvest')
library('httr')
library('xml2')
url <- 'http://bvmf.bmfbovespa.com.br/cias-listadas/empresas-listadas/BuscaEmpresaListada.aspx?idioma=pt-br'
request <- POST(url, body = list('__EVENTTARGET' = "ctl00:contentPlaceHolderConteudo:BuscaNomeEmpresa1:btnTodas"), encode = "multipart")
content(request, as = 'text', encoding = 'utf-8') %>% 
  read_html() %>% 
  html_nodes("tbody tr td a") %>%
  xml_attr("href") -> links
